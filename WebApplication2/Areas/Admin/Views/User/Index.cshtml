@*@model PagedList.IPagedList<KetNoiCSDL.EF.User>*@

@model IEnumerable<KetNoiCSDL.EF.User>



@using PagedList.Mvc;
@{
    PagedList.IPagedList<KetNoiCSDL.EF.User> users = ViewBag.users;
}
    @{
        ViewBag.Title = "Index";
        Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
    }

    <h2>Index</h2>

    <p>
        @Html.ActionLink("Create New", "Create")
    </p>
    <div class="container">
        <div class="row">
            <div class="col-lg-12 ">
                <div class="panel-body">
                    @using(Html.BeginForm("Index", "User", FormMethod.Get))
                    {
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="col-md-offset-0">
                                    <input type="text" name="searchString" value="@ViewBag.ChuoiTimKiem"    />
                                    <input type="submit" name="submit" value="Tìm kiếm User" />
                                </div>
                            </div>
                        </div>
                    }
                </div>


                <div class="table-responsive">
                    <table class="table table-bordered">
                        <thead class="thead-dark">
                            <tr>
                                <th>
                                    @Html.DisplayNameFor(model => model.UserName)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.Password)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.Name)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.Address)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.Email)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.Phone)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.ProvinceID)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.DistrictID)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.CreatedDate)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.CreatedBy)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.ModifiedDate)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.ModifiedBy)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.Status)
                                </th>
                                <th>
                                    @Html.DisplayNameFor(model => model.GroupID)
                                </th>
                                <th>Action</th>
                            </tr>
                        </thead>

                        <tbody>
                            @foreach (var item in users)
                            {
                                <tr id="row_@item.ID">
                                    <td>
                                        @Html.DisplayFor(modelItem => item.UserName)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Password)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Name)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Address)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Email)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Phone)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.ProvinceID)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.DistrictID)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.CreatedDate)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.CreatedBy)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.ModifiedDate)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.ModifiedBy)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Status)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.GroupID)
                                    </td>
                                    <td>
                                        @Html.ActionLink("Edit", "Edit", new { id = item.ID }) |
                                        @Html.ActionLink("Details", "Details", new { id = item.ID }) |
                                        @*@Html.ActionLink("Delete", "Delete", new { id = item.ID })*@
                                        @Ajax.ActionLink("Xóa", "Delete", new { @id = item.ID }, new AjaxOptions
                                        {
                                        Confirm = "Bạn có muốn xóa người dùng này?",
                                        OnComplete = "$('#row_" + item.ID + "').remove()",
                                        HttpMethod = "Delete"
                                        })

                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    

    @Html.PagedListPager(users, page => Url.Action("Index", new
    {
        page, @searchString= ViewBag.ChuoiTimKiem
    }));

